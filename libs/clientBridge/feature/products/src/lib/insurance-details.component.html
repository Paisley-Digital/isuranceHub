<div class="card-container">
  <mat-card class="widget-card max-md-widget">
    <mat-card-header>
      <div class="flex flex-col gap-2">
        <span class="font-medium">
          List of Louis Vuitton insurance employees
        </span>
        <div class="flex flex-col gap-2">
          <input
            type="file"
            class="hidden"
            multiple
            accept=".jpg, .jpeg, .png"
            (change)="onFilesSelected($event)"
            #fileInput
          />
          <div class="flex gap-2 mt-2">
            <button mat-flat-button class="w-1/3 !bg-blue-900" (click)="fileInput.click()">
              New
              <mat-icon svgIcon="add"></mat-icon>
            </button>
            @if (selected) {
              <button mat-stroked-button class="!text-blue-900" (click)="openDialog()" [ngClass]="">
                Cross Checking
                <mat-icon svgIcon="scan" color="primary"/>
              </button>
            }
          </div>
        </div>
      </div>

    </mat-card-header>
    <mat-card-content class="grid grid-cols-3 gap-4 justify-items-center mx-auto">
      @if (uploadedFiles.length) {
        <div class="card-grid">
          @for (file of uploadedFiles; track file) {
            <div class="card-item">
              <mat-card class="example-card " appearance="outlined">
                <div class="flex items-center h-12 w-full">
                  <div class="flex items-center mr-auto ml-2 gap-1">
                    <div class="flex items-center justify-center bg-gray-100 w-5 h-5 rounded-lg p-2">
                      <mat-icon svgIcon="buliding"></mat-icon>
                    </div>
                    <div class="text-xs font-medium ">
                      Employee insurance form
                    </div>
                  </div>
                  <div class="flex items-center ml-auto ">
                    <section>
                      <mat-checkbox (change)="onCheckboxChange( $event.checked)"
                                    color="primary"/>
                    </section>
                  </div>
                </div>
                <div class="divider"></div>
                <div class="content-list">
                  <div class="flex flex-col justify-center  mx-auto my-2 gap-2 ">
                    <img mat-card-image [src]="file.url" alt="{{ file.name }}"/>
                    <div>
                      {{ file.name }}
                    </div>
                  </div>
                </div>
              </mat-card>
            </div>
          }
        </div>
      } @else {
        <div class="error-state-container">
          <img ngSrc="./assets/images/Illustration.svg" width="270" height="170"/>
          <span class=" font-medium">
            Start by uploading a file
          </span>
          <p class="text-xs font-medium">
            Any assets used in projects will live here. Start creating by uploading your files.</p>
        </div>
      }
    </mat-card-content>
  </mat-card>
</div>

<ng-template #openDialogCrossDialog>
  <h4 mat-dialog-title>Cross Checking</h4>

  <mat-dialog-content class="mat-typography">
    <div class="flex items-center justify-center">
      @if (showLottie) {
        <div #lottie></div>
      } @else {
        <div>
          <mat-icon svgIcon="Excel" class=" !w-[130.25px] !h-[115.28px]"/>
        </div>
      }
    </div>
  </mat-dialog-content>
  <mat-dialog-actions align="end">
    <a mat-flat-button [mat-dialog-close]="true"
       href="./assets/images/Book1.xlsx"
       download class="my-4 !cursor-pointer backgroandButton" matRipple [disabled]="!selected">Open Excel</a>
    <button mat-stroked-button mat-dialog-close class="textColorButton">Cancel</button>
  </mat-dialog-actions>

</ng-template>
